<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room : <%=roomId%>
    </title>
    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io(`http://localhost:55556`);
        console.log("Bağlantı kuruldu!")
        document.addEventListener("DOMContentLoaded", () => {
            let videoC = document.getElementById("videoContainer");
            videoC.addEventListener("click", (e)=>{
                console.log("You clicked!");
                socket.emit('videoClick');
            })
        });

        socket.on("command", (msg)=>{
            if(msg == 1){
                video.contentWindow.postMessage(JSON.stringify({ event: 'command', 
                func: 'playVideo' }), '*');
            }
            else{
                video.contentWindow.postMessage(JSON.stringify({ event: 'command', 
                func: 'pauseVideo' }), '14000');
            }
          
        })
    </script>
</head>

<body>
    <h3>Welcome to room: <%=roomId%>
    </h3>
    <div id="videoContainer" >
        <iframe id="video" width="420" height="315"
            src="https://www.youtube.com/embed/<%=videoId%>?enablejsapi=1"></iframe>

    </div>
</body>

</html>